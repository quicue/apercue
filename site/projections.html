<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Projection Matrix — apercue.ca</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Mono:ital,wght@0,200..800;1,200..800&family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0e14;
  --bg-panel: #0f1319;
  --bg-cell: #111820;
  --bg-hover: #151b24;
  --border: #1e2733;
  --border-bright: #2a3545;
  --text: #c5cdd8;
  --text-dim: #5c6978;
  --text-bright: #e8ecf1;
  --accent: #3ddc84;
  --accent-dim: rgba(61, 220, 132, 0.15);
  --warn: #f0c040;
  --fail: #e05555;

  --phase-1: #5b9cf6;
  --phase-2: #7b6cf6;
  --phase-3: #c084fc;
  --phase-4: #34d1bf;
  --phase-5: #f0c040;
  --phase-6: #3ddc84;
  --phase-7: #f09070;
  --phase-8: #e8b84d;
  --body: 'Atkinson Hyperlegible Next', sans-serif;
  --mono: 'Atkinson Hyperlegible Mono', monospace;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html {
  scrollbar-width: thin;
  scrollbar-color: var(--border) var(--bg);
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--mono);
  font-size: 12px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* Scanline overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.03) 2px,
      rgba(0,0,0,0.03) 4px
    );
  pointer-events: none;
  z-index: 100;
}

/* ── Layout ─────────────────────────────── */
.dashboard {
  display: grid;
  grid-template-columns: 320px 1fr;
  grid-template-rows: auto 1fr;
  height: 100vh;
  gap: 1px;
  background: var(--border);
}

.header {
  grid-column: 1 / -1;
  background: var(--bg-panel);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  border-bottom: 1px solid var(--border);
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.header-title {
  font-weight: 600;
  font-size: 13px;
  color: var(--text-bright);
  letter-spacing: 0.03em;
}

.header-subtitle {
  font-size: 10px;
  color: var(--text-dim);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.header-nav {
  display: flex;
  gap: 20px;
}

.header-nav a {
  font-size: 11px;
  color: var(--text-dim);
  text-decoration: none;
  transition: color 0.2s;
}

.header-nav a:hover { color: var(--accent); }

/* ── Left column: SHACL + CPM panels ──── */
.left-col {
  background: var(--bg);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.panel {
  background: var(--bg-panel);
  padding: 20px;
}

.panel-label {
  font-size: 10px;
  font-weight: 500;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.panel-label::before {
  content: '';
  width: 3px;
  height: 10px;
  background: var(--accent);
  border-radius: 1px;
}

/* ── SHACL panel ────────────────────────── */
.shacl-status {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: var(--bg-cell);
  border: 1px solid var(--border);
  border-radius: 3px;
  margin-bottom: 16px;
}

.shacl-indicator {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  flex-shrink: 0;
}

.shacl-indicator.pass {
  background: var(--accent-dim);
  border: 2px solid var(--accent);
  box-shadow: 0 0 12px rgba(61, 220, 132, 0.2);
}

.shacl-indicator.fail {
  background: rgba(224, 85, 85, 0.15);
  border: 2px solid var(--fail);
  box-shadow: 0 0 12px rgba(224, 85, 85, 0.2);
}

.shacl-indicator.warn {
  background: rgba(240, 192, 64, 0.15);
  border: 2px solid var(--warn);
  box-shadow: 0 0 12px rgba(240, 192, 64, 0.2);
}

.shacl-text h3 {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-bright);
}

.shacl-text p {
  font-size: 11px;
  color: var(--text-dim);
  margin-top: 2px;
}

.shacl-details {
  font-size: 11px;
  color: var(--text-dim);
}

.shacl-details dt {
  color: var(--text);
  float: left;
  width: 140px;
}

.shacl-details dd {
  margin-bottom: 4px;
  font-variant-numeric: tabular-nums;
}

.shacl-details dd code {
  color: var(--accent);
  font-size: 11px;
}

/* ── CPM Summary panel ──────────────────── */
.cpm-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
  background: var(--border);
  border: 1px solid var(--border);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 16px;
}

.cpm-cell {
  background: var(--bg-cell);
  padding: 12px 14px;
  text-align: center;
}

.cpm-value {
  font-size: 22px;
  font-weight: 600;
  color: var(--text-bright);
  font-variant-numeric: tabular-nums;
}

.cpm-value.accent { color: var(--accent); }

.cpm-label {
  font-size: 9px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-top: 2px;
}

/* ── Slack histogram ────────────────────── */
.histogram {
  margin-top: 16px;
}

.histogram-title {
  font-size: 10px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 10px;
}

.histogram-bars {
  display: flex;
  align-items: flex-end;
  gap: 3px;
  height: 80px;
  padding-bottom: 20px;
  position: relative;
}

.histogram-bar {
  flex: 1;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
}

.histogram-fill {
  width: 100%;
  border-radius: 2px 2px 0 0;
  min-height: 2px;
  transition: height 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
}

.histogram-fill::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, transparent 100%);
  border-radius: inherit;
}

.histogram-count {
  position: absolute;
  top: -16px;
  font-size: 9px;
  color: var(--text-dim);
  font-variant-numeric: tabular-nums;
}

.histogram-label {
  position: absolute;
  bottom: -16px;
  font-size: 9px;
  color: var(--text-dim);
  font-variant-numeric: tabular-nums;
}

/* ── Gate status ────────────────────────── */
.gate-strip {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 16px;
}

.gate-row {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
}

.gate-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.gate-dot.satisfied {
  background: var(--accent);
  box-shadow: 0 0 6px rgba(61, 220, 132, 0.4);
}

.gate-dot.pending {
  background: transparent;
  border: 2px solid var(--text-dim);
}

.gate-name {
  color: var(--text);
  flex: 1;
}

.gate-phase {
  color: var(--text-dim);
  font-size: 10px;
  width: 18px;
  text-align: right;
}

/* ── Right column: Gantt ──────────────── */
.gantt-area {
  background: var(--bg);
  overflow: auto;
  position: relative;
}

.gantt-container {
  min-height: 100%;
  padding: 20px 20px 20px 0;
}

.gantt-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px 16px;
}

.gantt-header .panel-label { margin-bottom: 0; }

.gantt-legend {
  display: flex;
  gap: 14px;
  font-size: 10px;
}

.gantt-legend-item {
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--text-dim);
}

.gantt-legend-swatch {
  width: 16px;
  height: 6px;
  border-radius: 1px;
}

/* Gantt rows */
.gantt-row {
  display: grid;
  grid-template-columns: 180px 1fr;
  align-items: center;
  height: 24px;
  border-bottom: 1px solid rgba(30, 39, 51, 0.4);
  transition: background 0.1s;
}

.gantt-row:hover { background: var(--bg-hover); }
.gantt-row.critical { background: rgba(61, 220, 132, 0.03); }

.gantt-row-label {
  padding: 0 12px 0 20px;
  font-size: 10px;
  color: var(--text-dim);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gantt-row.critical .gantt-row-label {
  color: var(--accent);
  font-weight: 500;
}

.gantt-row.planned .gantt-row-label {
  opacity: 0.4;
  font-style: italic;
}

.gantt-track {
  position: relative;
  height: 100%;
}

.gantt-bar {
  position: absolute;
  top: 6px;
  height: 12px;
  border-radius: 2px;
  transition: opacity 0.2s;
}

.gantt-bar-early {
  opacity: 0.9;
}

.gantt-bar-slack {
  opacity: 0.15;
  border: 1px dashed;
  background: transparent !important;
}

.gantt-bar.critical-bar {
  box-shadow: 0 0 8px rgba(61, 220, 132, 0.25);
  animation: pulse-glow 2s ease-in-out infinite alternate;
}

@keyframes pulse-glow {
  from { box-shadow: 0 0 4px rgba(61, 220, 132, 0.15); }
  to { box-shadow: 0 0 10px rgba(61, 220, 132, 0.35); }
}

/* Gantt time axis */
.gantt-axis {
  display: grid;
  grid-template-columns: 180px 1fr;
  height: 24px;
  border-bottom: 2px solid var(--border);
  margin-bottom: 4px;
}

.gantt-axis-label {
  padding: 0 12px 0 20px;
  font-size: 10px;
  font-weight: 500;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  display: flex;
  align-items: center;
}

.gantt-axis-ticks {
  position: relative;
  height: 100%;
}

.gantt-tick {
  position: absolute;
  bottom: 0;
  font-size: 9px;
  color: var(--text-dim);
  transform: translateX(-50%);
  font-variant-numeric: tabular-nums;
}

.gantt-gridline {
  position: absolute;
  top: 0;
  width: 1px;
  height: calc(100vh - 120px);
  background: var(--border);
  opacity: 0.3;
  pointer-events: none;
}

/* ── Stagger animations ─────────────────── */
@keyframes slide-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.panel { animation: slide-in 0.4s ease-out backwards; }
.panel:nth-child(1) { animation-delay: 0.05s; }
.panel:nth-child(2) { animation-delay: 0.15s; }
.panel:nth-child(3) { animation-delay: 0.25s; }

.gantt-row {
  animation: slide-in 0.3s ease-out backwards;
}

/* Tooltip */
.gantt-tooltip {
  position: fixed;
  background: var(--bg-panel);
  border: 1px solid var(--border-bright);
  border-radius: 3px;
  padding: 8px 12px;
  font-size: 11px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.12s;
  z-index: 50;
  max-width: 260px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.5);
}

.gantt-tooltip.visible { opacity: 1; }

.gantt-tooltip .tt-name {
  font-weight: 600;
  color: var(--text-bright);
  font-size: 12px;
}

.gantt-tooltip .tt-row {
  color: var(--text-dim);
  margin-top: 3px;
}

.gantt-tooltip .tt-row span {
  color: var(--text);
  font-variant-numeric: tabular-nums;
}
</style>
</head>
<body>

<div class="dashboard">

<!-- ═══ HEADER ═════════════════════════════════ -->
<div class="header">
  <div class="header-left">
    <div class="header-title">apercue projections</div>
    <div class="header-subtitle">SHACL &middot; OWL-Time &middot; CPM</div>
  </div>
  <nav class="header-nav">
    <a href="index.html">Home</a>
    <a href="charter.html">Charter</a>
    <a href="explorer.html">Ecosystem</a>
    <a href="https://github.com/quicue/apercue">GitHub</a>
  </nav>
</div>

<!-- ═══ LEFT COLUMN ═══════════════════════════ -->
<div class="left-col">

  <!-- SHACL Panel -->
  <div class="panel" id="shacl-panel">
    <div class="panel-label">SHACL Validation Report</div>
    <div id="shacl-content"></div>
  </div>

  <!-- CPM Panel -->
  <div class="panel" id="cpm-panel">
    <div class="panel-label">CPM Schedule Analysis</div>
    <div id="cpm-content"></div>
  </div>

  <!-- Gate Status -->
  <div class="panel" id="gate-panel">
    <div class="panel-label">Phase Gates</div>
    <div id="gate-content"></div>
  </div>

</div>

<!-- ═══ GANTT AREA ════════════════════════════ -->
<div class="gantt-area">
  <div class="gantt-container" id="gantt-container"></div>
  <div class="gantt-tooltip" id="gantt-tooltip"></div>
</div>

</div>

<script>
const PHASE_COLORS = {
  1: '#5b9cf6', 2: '#7b6cf6', 3: '#c084fc',
  4: '#34d1bf', 5: '#f0c040', 6: '#3ddc84',
  7: '#f09070', 8: '#e8b84d'
};

async function init() {
  let proj, charter;
  try {
    [proj, charter] = await Promise.all([
      fetch('data/projections.json').then(r => r.json()),
      fetch('data/charter.json').then(r => r.json())
    ]);
  } catch(e) {
    console.error('Failed to load data:', e);
    return;
  }

  renderSHACL(proj.shacl);
  renderCPM(proj.scheduling, charter);
  renderGates(charter.gates);
  renderGantt(charter);
}

// ═══ SHACL PANEL ══════════════════════════════
function renderSHACL(shacl) {
  const conforms = shacl['sh:conforms'];
  const results = shacl['sh:result'] || [];
  const conformsTo = shacl['dcterms:conformsTo'] || '';

  const el = document.getElementById('shacl-content');
  const iconClass = conforms ? 'pass' : (results.length > 0 ? 'fail' : 'warn');
  const icon = conforms ? '\u2713' : (results.length > 0 ? '\u2717' : '\u25cb');
  const label = conforms ? 'Conforms' : (results.length > 0 ? `${results.length} Violations` : 'Incomplete');
  const desc = conforms
    ? 'All charter gates satisfied. Full W3C compliance.'
    : (results.length > 0
        ? `${results.length} validation result(s) require attention.`
        : 'Charter gates remain open. No active violations.');

  el.innerHTML = `
    <div class="shacl-status">
      <div class="shacl-indicator ${iconClass}">${icon}</div>
      <div class="shacl-text">
        <h3>${label}</h3>
        <p>${desc}</p>
      </div>
    </div>
    <dl class="shacl-details">
      <dt>@type</dt><dd><code>${shacl['@type'] || 'sh:ValidationReport'}</code></dd>
      <dt>sh:conforms</dt><dd><code>${conforms}</code></dd>
      <dt>sh:result count</dt><dd><code>${results.length}</code></dd>
      <dt>dcterms:conformsTo</dt><dd><code>${conformsTo || 'charter#apercue-build'}</code></dd>
    </dl>
    ${results.length > 0 ? `
      <div style="margin-top:12px;font-size:10px;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:8px">Violations</div>
      ${results.map(r => `
        <div style="padding:6px 10px;background:var(--bg-cell);border:1px solid var(--border);border-radius:2px;margin-bottom:4px;font-size:11px;">
          <span style="color:var(--fail)">${r['sh:resultSeverity'] || 'Violation'}</span>
          <span style="color:var(--text)">${r['sh:focusNode'] || ''}</span>
          <div style="color:var(--text-dim);margin-top:2px">${r['sh:resultMessage'] || ''}</div>
        </div>
      `).join('')}
    ` : ''}
  `;
}

// ═══ CPM PANEL ════════════════════════════════
function renderCPM(scheduling, charter) {
  const s = scheduling.summary;
  const nodes = charter.nodes;

  // Compute slack distribution
  const slackBuckets = {};
  nodes.forEach(n => {
    const slack = n.slack || 0;
    slackBuckets[slack] = (slackBuckets[slack] || 0) + 1;
  });

  const maxSlack = Math.max(...Object.keys(slackBuckets).map(Number));
  const maxCount = Math.max(...Object.values(slackBuckets));

  const el = document.getElementById('cpm-content');

  el.innerHTML = `
    <div class="cpm-grid">
      <div class="cpm-cell">
        <div class="cpm-value">${s.total_duration}</div>
        <div class="cpm-label">Total Duration</div>
      </div>
      <div class="cpm-cell">
        <div class="cpm-value accent">${s.critical_count}</div>
        <div class="cpm-label">Critical Nodes</div>
      </div>
      <div class="cpm-cell">
        <div class="cpm-value">${s.total_resources}</div>
        <div class="cpm-label">Total Resources</div>
      </div>
      <div class="cpm-cell">
        <div class="cpm-value">${s.max_slack}</div>
        <div class="cpm-label">Max Slack</div>
      </div>
    </div>

    <div class="histogram">
      <div class="histogram-title">Slack Distribution</div>
      <div class="histogram-bars" id="slack-histogram"></div>
    </div>
  `;

  // Render histogram bars
  const histEl = document.getElementById('slack-histogram');
  const barHeight = 60;

  for (let i = 0; i <= maxSlack; i++) {
    const count = slackBuckets[i] || 0;
    const h = count > 0 ? Math.max(4, (count / maxCount) * barHeight) : 0;
    const color = i === 0 ? 'var(--accent)' : `hsl(${200 + i * 8}, 40%, ${35 + i * 3}%)`;

    const bar = document.createElement('div');
    bar.className = 'histogram-bar';
    bar.innerHTML = `
      ${count > 0 ? `<div class="histogram-count">${count}</div>` : ''}
      <div class="histogram-fill" style="height:${h}px;background:${color}"></div>
      <div class="histogram-label">${i}</div>
    `;
    histEl.appendChild(bar);
  }
}

// ═══ GATE STATUS ══════════════════════════════
function renderGates(gates) {
  const el = document.getElementById('gate-content');
  const sorted = Object.entries(gates).sort((a,b) => a[1].phase - b[1].phase);

  el.innerHTML = `<div class="gate-strip">
    ${sorted.map(([name, g]) => `
      <div class="gate-row">
        <div class="gate-dot ${g.satisfied ? 'satisfied' : 'pending'}"></div>
        <div class="gate-name">${name}</div>
        <div class="gate-phase" style="color:${PHASE_COLORS[g.phase]}">${g.phase}</div>
      </div>
    `).join('')}
  </div>`;
}

// ═══ GANTT CHART ══════════════════════════════
function renderGantt(charter) {
  const container = document.getElementById('gantt-container');
  const tooltip = document.getElementById('gantt-tooltip');
  const nodes = charter.nodes;
  const cpm = charter.scheduling;
  const totalDuration = cpm.summary.total_duration;

  // Build critical set
  const criticalSet = new Set(cpm.critical_sequence.map(s => s.resource));

  // Sort: critical first (by earliest), then by earliest, then by name
  const sorted = [...nodes].sort((a, b) => {
    const aCrit = criticalSet.has(a.id) ? 0 : 1;
    const bCrit = criticalSet.has(b.id) ? 0 : 1;
    if (aCrit !== bCrit) return aCrit - bCrit;
    if (a.earliest !== b.earliest) return a.earliest - b.earliest;
    return a.id.localeCompare(b.id);
  });

  // Header with legend
  let html = `
    <div class="gantt-header">
      <div class="panel-label" style="margin-bottom:0">OWL-Time Gantt Schedule</div>
      <div class="gantt-legend">
        <div class="gantt-legend-item">
          <div class="gantt-legend-swatch" style="background:var(--accent)"></div>
          Critical path
        </div>
        <div class="gantt-legend-item">
          <div class="gantt-legend-swatch" style="background:var(--text-dim);opacity:0.3;border:1px dashed var(--text-dim)"></div>
          Float (slack)
        </div>
      </div>
    </div>
  `;

  // Time axis
  html += `<div class="gantt-axis">
    <div class="gantt-axis-label">Resource</div>
    <div class="gantt-axis-ticks" id="gantt-ticks"></div>
  </div>`;

  // Rows
  sorted.forEach((n, i) => {
    const isCritical = criticalSet.has(n.id);
    const cls = [
      'gantt-row',
      isCritical ? 'critical' : '',
      n.planned ? 'planned' : ''
    ].filter(Boolean).join(' ');

    html += `
      <div class="${cls}" style="animation-delay:${0.02 * i}s" data-idx="${i}">
        <div class="gantt-row-label" title="${n.id}">${n.id}</div>
        <div class="gantt-track" data-node="${n.id}"></div>
      </div>
    `;
  });

  container.innerHTML = html;

  // Render bars into tracks
  const tracks = container.querySelectorAll('.gantt-track');
  tracks.forEach(track => {
    const id = track.dataset.node;
    const n = nodes.find(x => x.id === id);
    if (!n) return;

    const pct = (v) => (v / totalDuration * 100) + '%';
    const color = PHASE_COLORS[n.phase] || '#5b9cf6';
    const isCritical = criticalSet.has(id);

    // Earliest bar (solid)
    const earlyBar = document.createElement('div');
    earlyBar.className = 'gantt-bar gantt-bar-early' + (isCritical ? ' critical-bar' : '');
    earlyBar.style.left = pct(n.earliest);
    earlyBar.style.width = pct(n.duration);
    earlyBar.style.background = isCritical ? 'var(--accent)' : color;
    track.appendChild(earlyBar);

    // Slack bar (dashed outline)
    if (n.slack > 0) {
      const slackBar = document.createElement('div');
      slackBar.className = 'gantt-bar gantt-bar-slack';
      slackBar.style.left = pct(n.earliest + n.duration);
      slackBar.style.width = pct(n.slack);
      slackBar.style.borderColor = color;
      track.appendChild(slackBar);
    }
  });

  // Time axis ticks + gridlines
  const ticksEl = document.getElementById('gantt-ticks');
  for (let t = 0; t <= totalDuration; t++) {
    const pct = (t / totalDuration * 100) + '%';
    ticksEl.innerHTML += `
      <span class="gantt-tick" style="left:${pct}">${t}</span>
      <div class="gantt-gridline" style="left:${pct}"></div>
    `;
  }

  // Tooltip on row hover
  const rows = container.querySelectorAll('.gantt-row[data-idx]');
  rows.forEach(row => {
    const track = row.querySelector('.gantt-track');
    if (!track) return;
    const id = track.dataset.node;
    const n = nodes.find(x => x.id === id);
    if (!n) return;

    row.addEventListener('mouseenter', (e) => {
      const isCritical = criticalSet.has(id);
      tooltip.innerHTML = `
        <div class="tt-name">${n.id}</div>
        <div class="tt-row">Phase <span>${n.phase}</span> · ${n.gate}</div>
        <div class="tt-row">ES <span>${n.earliest}</span> → EF <span>${n.earliest + n.duration}</span></div>
        <div class="tt-row">LS <span>${n.latest}</span> → LF <span>${n.latest + n.duration}</span></div>
        <div class="tt-row">Slack <span style="color:${n.slack === 0 ? 'var(--accent)' : 'var(--text)'}">${n.slack}${n.slack === 0 ? ' (CRITICAL)' : ''}</span></div>
        ${n.planned ? '<div class="tt-row" style="color:var(--warn)">PLANNED</div>' : ''}
      `;
      tooltip.classList.add('visible');
    });

    row.addEventListener('mousemove', (e) => {
      tooltip.style.left = (e.clientX + 14) + 'px';
      tooltip.style.top = (e.clientY - 10) + 'px';
    });

    row.addEventListener('mouseleave', () => {
      tooltip.classList.remove('visible');
    });
  });
}

init();
</script>
</body>
</html>
