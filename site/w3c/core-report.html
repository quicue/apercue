<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Core W3C Evidence Report — apercue.ca</title>
<style>
  :root {
    --bg: #fafafa;
    --fg: #1a1a1a;
    --accent: #2563eb;
    --code-bg: #f3f4f6;
    --border: #d1d5db;
    --max-w: 48rem;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #111827;
      --fg: #e5e7eb;
      --accent: #60a5fa;
      --code-bg: #1f2937;
      --border: #374151;
    }
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
    background: var(--bg);
    color: var(--fg);
    line-height: 1.7;
    padding: 2rem 1rem;
    max-width: var(--max-w);
    margin: 0 auto;
  }
  nav {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.875rem;
  }
  nav a { color: var(--accent); text-decoration: none; }
  nav a:hover { text-decoration: underline; }
  h1 { font-size: 1.75rem; margin: 1.5rem 0 0.75rem; }
  h2 { font-size: 1.35rem; margin: 1.5rem 0 0.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.25rem; }
  h3 { font-size: 1.1rem; margin: 1.25rem 0 0.5rem; }
  p { margin: 0.75rem 0; }
  a { color: var(--accent); }
  ul, ol { margin: 0.75rem 0 0.75rem 1.5rem; }
  li { margin: 0.25rem 0; }
  code {
    background: var(--code-bg);
    padding: 0.15em 0.4em;
    border-radius: 3px;
    font-size: 0.9em;
    font-family: "SF Mono", "Fira Code", Consolas, monospace;
  }
  pre {
    background: var(--code-bg);
    padding: 1rem;
    border-radius: 6px;
    overflow-x: auto;
    margin: 1rem 0;
    border: 1px solid var(--border);
  }
  pre code {
    background: none;
    padding: 0;
    font-size: 0.85em;
    line-height: 1.5;
  }
  blockquote {
    border-left: 3px solid var(--accent);
    padding-left: 1rem;
    margin: 1rem 0;
    color: #6b7280;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    margin: 1rem 0;
    font-size: 0.9rem;
  }
  th, td {
    border: 1px solid var(--border);
    padding: 0.5rem 0.75rem;
    text-align: left;
  }
  th { background: var(--code-bg); font-weight: 600; }
  hr { border: none; border-top: 1px solid var(--border); margin: 1.5rem 0; }
  strong { font-weight: 600; }
  .meta {
    color: #6b7280;
    font-size: 0.875rem;
    margin-top: 3rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
  }
</style>
</head>
<body>
<nav>
  <a href="../index.html">apercue.ca</a> /
  <a href="index.html">W3C Reports</a> /
  Core W3C Evidence Report
</nav>
<h1 id="compile-time-linked-data-full-w3c-closure-from-a-single-cue-value">Compile-Time Linked Data: Full W3C Closure From a Single CUE Value</h1>
<p><strong>Use Case Report for W3C Community Groups</strong></p>
<hr>
<h2 id="abstract">Abstract</h2>
<p><a href="https://cuelang.org">CUE</a>'s lattice-based unification simultaneously performs
SPARQL-class graph pattern matching and SHACL constraint validation at compile
time. A single typed dependency graph produces 17 W3C
specification outputs — including JSON-LD, SHACL, SKOS, OWL-Time, PROV-O, ODRL,
and Verifiable Credentials — without runtime processors, triplestores, or
pipelines. A 14th (Hydra) is implemented downstream.</p>
<p>This report documents the implementation, provides computed evidence from a live
example graph, and identifies relevance to four W3C Community Groups.</p>
<p><strong>All evidence below is computed, not hand-written.</strong> Each JSON block is
generated by <code>cue export ./w3c/ -e evidence.&lt;field&gt;</code>. Reproduce from source:
<a href="https://github.com/quicue/apercue">github.com/quicue/apercue</a>.</p>
<h2 id="problem-statement">Problem Statement</h2>
<p>The semantic web stack traditionally requires five or more runtime components:
an RDF store, a SPARQL query engine, a SHACL processor, a serializer, and a
query planner. Each introduces its own execution model, failure modes, and
infrastructure requirements. Schema drift between layers is common.</p>
<p>For constrained domains — research data management, project plans, infrastructure
topology, academic curricula — this operational complexity is disproportionate
to the problem. These domains share a common structure: typed resources with directed
acyclic dependency edges. They need standards-compliant output, not the full
semantic web runtime.</p>
<h2 id="approach">Approach</h2>
<p><a href="https://github.com/quicue/apercue">apercue.ca</a> implements a constraint-based
alternative using CUE, a configuration language with lattice-theoretic type
semantics. Resources declare two things: what they are (<code>@type</code>, a
struct-as-set) and what they need (<code>depends_on</code>, also a struct-as-set):</p>
<pre><code class="language-cue">&quot;analysis-code&quot;: {
    name:       &quot;analysis-code&quot;
    &quot;@type&quot;:    {Process: true}
    depends_on: {&quot;sensor-dataset&quot;: true}
}
</code></pre>
<p>Everything else — topology, impact analysis, compliance, scheduling, and every
W3C output — is a projection of this single value.
<code>cue export -e &lt;expression&gt;</code> produces the target format.</p>
<h2 id="implementation-evidence">Implementation Evidence</h2>
<p>The inline example graph defines a 5-node research publication pipeline:
ethics approval, sensor dataset, analysis code, draft paper, and peer review.
This domain was chosen because W3C specifications map to their intended
purposes: Dublin Core for publication metadata, PROV-O for dataset provenance,
ODRL for data embargo policies, and OWL-Time for submission deadlines. This is
the same <code>#Graph</code> pattern used in production deployments with 30+ nodes.</p>
<h3 id="json-ld-context">JSON-LD Context</h3>
<p>All evidence blocks share this <code>@context</code>, which maps resource fields to
standard W3C vocabularies:</p>
<pre><code class="language-json">{
    &quot;@context&quot;: {
        &quot;@base&quot;: &quot;urn:resource:&quot;,
        &quot;dcterms&quot;: &quot;http://purl.org/dc/terms/&quot;,
        &quot;prov&quot;: &quot;http://www.w3.org/ns/prov#&quot;,
        &quot;dcat&quot;: &quot;http://www.w3.org/ns/dcat#&quot;,
        &quot;sh&quot;: &quot;http://www.w3.org/ns/shacl#&quot;,
        &quot;skos&quot;: &quot;http://www.w3.org/2004/02/skos/core#&quot;,
        &quot;schema&quot;: &quot;https://schema.org/&quot;,
        &quot;time&quot;: &quot;http://www.w3.org/2006/time#&quot;,
        &quot;earl&quot;: &quot;http://www.w3.org/ns/earl#&quot;,
        &quot;odrl&quot;: &quot;http://www.w3.org/ns/odrl/2/&quot;,
        &quot;org&quot;: &quot;http://www.w3.org/ns/org#&quot;,
        &quot;cred&quot;: &quot;https://www.w3.org/2018/credentials#&quot;,
        &quot;as&quot;: &quot;https://www.w3.org/ns/activitystreams#&quot;,
        &quot;apercue&quot;: &quot;https://apercue.ca/vocab#&quot;,
        &quot;charter&quot;: &quot;https://apercue.ca/charter#&quot;,
        &quot;name&quot;: &quot;dcterms:title&quot;,
        &quot;description&quot;: &quot;dcterms:description&quot;,
        &quot;depends_on&quot;: {
            &quot;@id&quot;: &quot;dcterms:requires&quot;,
            &quot;@type&quot;: &quot;@id&quot;
        },
        &quot;status&quot;: {
            &quot;@id&quot;: &quot;schema:actionStatus&quot;,
            &quot;@type&quot;: &quot;@id&quot;
        },
        &quot;tags&quot;: {
            &quot;@id&quot;: &quot;dcterms:subject&quot;,
            &quot;@container&quot;: &quot;@set&quot;
        }
    }
}
</code></pre>
<p>This context is not a configuration file — it is a CUE value computed from
the vocabulary registry. Every resource exported through this context produces
valid JSON-LD 1.1.</p>
<h3 id="shacl-validation-computed">SHACL Validation (computed)</h3>
<p>A compliance rule requires that publications have upstream dependencies
(cannot exist without supporting data). The <code>#ComplianceCheck</code> pattern
produces a standard <code>sh:ValidationReport</code>:</p>
<pre><code class="language-json">{
    &quot;@type&quot;: &quot;sh:ValidationReport&quot;,
    &quot;sh:conforms&quot;: true,
    &quot;sh:result&quot;: []
}
</code></pre>
<p><code>sh:conforms: true</code> — all compliance rules pass. This is produced at CUE
evaluation time. No separate SHACL processor runs.</p>
<h3 id="critical-path-owl-time-computed">Critical Path / OWL-Time (computed)</h3>
<p>The <code>#CriticalPath</code> pattern computes forward/backward passes and identifies
the critical sequence:</p>
<pre><code class="language-json">[
    {
        &quot;resource&quot;: &quot;ethics-approval&quot;,
        &quot;start&quot;: 0,
        &quot;finish&quot;: 60,
        &quot;duration&quot;: 60
    },
    {
        &quot;resource&quot;: &quot;sensor-dataset&quot;,
        &quot;start&quot;: 60,
        &quot;finish&quot;: 150,
        &quot;duration&quot;: 90
    },
    {
        &quot;resource&quot;: &quot;analysis-code&quot;,
        &quot;start&quot;: 150,
        &quot;finish&quot;: 195,
        &quot;duration&quot;: 45
    },
    {
        &quot;resource&quot;: &quot;draft-paper&quot;,
        &quot;start&quot;: 195,
        &quot;finish&quot;: 225,
        &quot;duration&quot;: 30
    },
    {
        &quot;resource&quot;: &quot;peer-review&quot;,
        &quot;start&quot;: 225,
        &quot;finish&quot;: 285,
        &quot;duration&quot;: 60
    }
]
</code></pre>
<p>5-node critical path, 285-day total
duration. The same data produces standard OWL-Time <code>time:Interval</code> entries:</p>
<pre><code class="language-json">{
    &quot;@type&quot;: &quot;time:Interval&quot;,
    &quot;@id&quot;: &quot;urn:resource:analysis-code&quot;,
    &quot;dcterms:title&quot;: &quot;analysis-code&quot;,
    &quot;time:hasBeginning&quot;: {
        &quot;@type&quot;: &quot;time:Instant&quot;,
        &quot;time:inXSDDecimal&quot;: 150
    },
    &quot;time:hasEnd&quot;: {
        &quot;@type&quot;: &quot;time:Instant&quot;,
        &quot;time:inXSDDecimal&quot;: 195
    },
    &quot;time:hasDuration&quot;: {
        &quot;@type&quot;: &quot;time:Duration&quot;,
        &quot;time:numericDuration&quot;: 45,
        &quot;time:unitType&quot;: {
            &quot;@id&quot;: &quot;time:unitDay&quot;
        }
    },
    &quot;apercue:slack&quot;: 0,
    &quot;apercue:isCritical&quot;: true
}
</code></pre>
<p>Each resource becomes a <code>time:Interval</code> with <code>time:hasBeginning</code>,
<code>time:hasEnd</code>, and <code>time:hasDuration</code>. Slack and criticality are extensions
in the <code>apercue:</code> namespace.</p>
<h3 id="access-policy-odrl-computed">Access Policy / ODRL (computed)</h3>
<p>The <code>#ODRLPolicy</code> pattern projects dependency-graph resources into an ODRL
policy set:</p>
<pre><code class="language-json">{
    &quot;@type&quot;: &quot;odrl:Set&quot;,
    &quot;odrl:uid&quot;: &quot;apercue:graph-policy&quot;,
    &quot;odrl:permission&quot;: [
        {
            &quot;odrl:action&quot;: {
                &quot;@id&quot;: &quot;odrl:read&quot;
            }
        },
        {
            &quot;odrl:action&quot;: {
                &quot;@id&quot;: &quot;odrl:execute&quot;
            },
            &quot;odrl:assignee&quot;: {
                &quot;@id&quot;: &quot;apercue:operator&quot;
            }
        }
    ],
    &quot;odrl:prohibition&quot;: []
}
</code></pre>
<p>Permissions and prohibitions are typed by the same <code>@type</code> set that drives
graph construction. Adding a policy is adding a CUE file, not configuring
middleware.</p>
<h3 id="provenance-prov-o-computed">Provenance / PROV-O (computed)</h3>
<p>The <code>#ProvenanceTrace</code> pattern maps dependency edges to <code>prov:wasDerivedFrom</code>
relations:</p>
<pre><code class="language-json">{
    &quot;@type&quot;: &quot;prov:Entity&quot;,
    &quot;@id&quot;: &quot;urn:resource:analysis-code&quot;,
    &quot;dcterms:title&quot;: &quot;analysis-code&quot;,
    &quot;prov:wasAttributedTo&quot;: {
        &quot;@id&quot;: &quot;apercue:graph-engine&quot;
    },
    &quot;prov:wasDerivedFrom&quot;: [
        {
            &quot;@id&quot;: &quot;urn:resource:sensor-dataset&quot;
        }
    ],
    &quot;prov:wasGeneratedBy&quot;: {
        &quot;@id&quot;: &quot;apercue:graph-construction&quot;
    }
}
</code></pre>
<p>Every resource becomes a <code>prov:Entity</code>. Dependency edges become derivation
links. The full provenance graph includes all 5 resources plus the
generating <code>prov:Activity</code> and <code>prov:Agent</code>.</p>
<h3 id="spec-coverage">Spec Coverage</h3>
<p>17 specifications implemented,
1 downstream (in the infrastructure-specific
extension). Adding a projection is adding a file, not modifying a framework.</p>
<p><strong>Implemented</strong> (13):</p>
<table>
<thead>
<tr>
<th>W3C Specification</th>
<th>CUE Produces</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSON-LD 1.1</td>
<td>@context, @type, @id on all resources</td>
</tr>
<tr>
<td>SHACL</td>
<td>sh:ValidationReport from compliance checks and gap analysis</td>
</tr>
<tr>
<td>SKOS</td>
<td>skos:ConceptScheme from type vocabularies and lifecycle phases</td>
</tr>
<tr>
<td>EARL</td>
<td>earl:Assertion from smoke test plans</td>
</tr>
<tr>
<td>OWL-Time</td>
<td>time:Interval from critical path scheduling</td>
</tr>
<tr>
<td>Dublin Core</td>
<td>dcterms:title, dcterms:description, dcterms:requires on all resources</td>
</tr>
<tr>
<td>PROV-O</td>
<td>prov:Entity + prov:wasDerivedFrom from dependency edges</td>
</tr>
<tr>
<td>schema.org</td>
<td>schema:additionalType annotations via configurable type mapping</td>
</tr>
<tr>
<td>ODRL 2.2</td>
<td>odrl:Set policies with permissions/prohibitions by resource type</td>
</tr>
<tr>
<td>Activity Streams 2.0</td>
<td>as:OrderedCollection of Create activities from topology layers</td>
</tr>
<tr>
<td>Verifiable Credentials 2.0</td>
<td>VerifiableCredential wrapping SHACL validation attestation</td>
</tr>
<tr>
<td>W3C Org</td>
<td>org:Organization with type-based OrganizationalUnits</td>
</tr>
<tr>
<td>DCAT 3</td>
<td>dcat:Catalog with dcat:Dataset per resource, dcat:theme from @type</td>
</tr>
</tbody>
</table>
<p><strong>Downstream</strong> (1):</p>
<table>
<thead>
<tr>
<th>W3C Specification</th>
<th>CUE Produces</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hydra Core</td>
<td>hydra:ApiDocumentation in quicue.ca operator dashboard</td>
</tr>
</tbody>
</table>
<h2 id="key-mechanisms">Key Mechanisms</h2>
<h3 id="transitive-closure-via-unification">Transitive Closure via Unification</h3>
<pre><code class="language-cue">_ancestors: {
    [_]: true
    if _hasDeps {
        for d, _ in _deps {
            (d): true
            resources[d]._ancestors
        }
    }
}
</code></pre>
<p>Six lines. CUE resolves the fixpoint — the struct expands until merging
produces no new keys, then stops. No explicit loop, no recursion depth
tracking. This is the same mechanism as SPARQL property paths, but
resolved statically.</p>
<h3 id="type-overlap-as-dispatch">Type Overlap as Dispatch</h3>
<pre><code class="language-cue">for tname, _ in provider.types
if resource[&quot;@type&quot;][tname] != _|_ {tname}
</code></pre>
<p>A resource with <code>{Dataset: true, Governance: true}</code> matches a data
repository (serves Dataset) AND an ethics board (serves Governance)
simultaneously. Set intersection, not registration. This is the CUE
equivalent of SPARQL <code>?resource a ?type</code> pattern matching.</p>
<h3 id="constraints-as-values">Constraints as Values</h3>
<p>CUE constraints live in the same package as the computation:</p>
<pre><code class="language-cue">sh:conforms: true   // unification — false is ⊥
</code></pre>
<p>If a compliance check produces <code>sh:conforms: false</code>, unification with
<code>true</code> is bottom (<code>_|_</code>). <code>cue vet</code> fails. No assertion framework —
the language IS the constraint solver. SHACL validation becomes a type
error.</p>
<h2 id="multi-domain-validation">Multi-Domain Validation</h2>
<p>The same patterns have been validated across four independent domains:</p>
<table>
<thead>
<tr>
<th>Domain</th>
<th>Resources</th>
<th>Patterns Used</th>
</tr>
</thead>
<tbody>
<tr>
<td>Research data mgmt</td>
<td>5 resources, 3 types</td>
<td>Provenance, embargo, scheduling</td>
</tr>
<tr>
<td>IT infrastructure</td>
<td>30 nodes, 29 providers</td>
<td>Full stack (654 CLI commands)</td>
</tr>
<tr>
<td>University curricula</td>
<td>12 CS courses</td>
<td>Critical path, compliance, charter</td>
</tr>
<tr>
<td>Construction PM</td>
<td>18 work packages</td>
<td>5 DAG gates, CMHC retrofit phases</td>
</tr>
</tbody>
</table>
<p>Same <code>#Graph</code>, same <code>#CriticalPath</code>, same <code>#ComplianceCheck</code>. The domain is
data; the patterns are generic.</p>
<h2 id="limitations">Limitations</h2>
<ul>
<li><strong>Closed-world only.</strong> All resources and constraints must be declared
  upfront. Not a replacement for open-world RDF federation.</li>
<li><strong>DAGs only.</strong> No cycles. Dependency graphs are directed acyclic by
  definition in our target domains.</li>
<li><strong>Performance ceiling.</strong> CUE's recursive struct references don't memoize.
  For graphs exceeding ~40 nodes, pre-compute transitive closure externally
  (solved: 95s to 33ms for a 40-node project charter).</li>
<li><strong>Not a general RDF toolkit.</strong> This approach targets constrained domains
  where schema control is a given.</li>
</ul>
<h2 id="relevance-to-w3c-community-groups">Relevance to W3C Community Groups</h2>
<ul>
<li><strong>KG-Construct:</strong> CUE as a declarative KG construction language —
  graph building, SHACL validation, and RDF serialization in one
  compile-time evaluation. No mapping language or runtime pipeline.</li>
<li><strong>Context Graphs:</strong> Struct-as-set <code>@type</code> as multi-context resource
  identity — one resource participates in data governance, provenance,
  scheduling, and semantic web contexts simultaneously via set
  intersection.</li>
<li><strong>PM-KR:</strong> Charter pattern as compile-time project completion —
  gap analysis, critical path, and EARL test plans from constraint
  satisfaction. Project management as type checking.</li>
<li><strong>Dataspaces:</strong> <code>.kb/</code> convention and ODRL/DCAT projections as
  lightweight dataspace primitives with structural governance.
  Each knowledge base entry validates against typed schemas at
  evaluation time.</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/quicue/apercue">github.com/quicue/apercue</a>
  — Generic reference implementation (Apache 2.0)</li>
<li><a href="https://github.com/quicue/quicue.ca">github.com/quicue/quicue.ca</a>
  — Infrastructure-specific extension</li>
<li><a href="https://demo.quicue.ca">demo.quicue.ca</a> — Interactive D3 explorer</li>
<li><a href="https://api.quicue.ca">api.quicue.ca</a> — Static API (727 pre-computed JSON files)</li>
<li><a href="https://docs.quicue.ca">docs.quicue.ca</a> — Module documentation</li>
</ul>
<div class="meta">
  <p>Source: <a href="https://github.com/quicue/apercue/tree/main/w3c">github.com/quicue/apercue/tree/main/w3c</a></p>
  <p>All evidence is computed from CUE source. Reproduce: <code>cue export ./w3c/ -e evidence --out json</code></p>
</div>
</body>
</html>
