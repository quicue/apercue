# apercue documentation and consistency todo
# updated: 2026-02-26
#
# Legend:
#   [ ] pending
#   [x] done
#   [-] wont-do / superseded

# ── Session 2026-02-25: broken command fixes ──────────────────────────────

[x] README.md line 148: replace stale -e dot with -e cpm.critical_sequence
[x] recipe-ingredients: gaps.summary -> gap_summary (recipe.cue + README)
[x] project-tracker: gaps.summary -> summary (tasks.cue + README)
[x] toposort.py: add from __future__ import annotations for Python 3.9
[x] tests/unicode-rejection: remove stray cue.mod, resolve imports via root
[x] supply-chain/README.md line 152: hardcoded /home/mthdn path -> relative
[x] project-tracker/README.md: remove duplicate summary command
[x] README.md line 93: ecosystem count 12 -> 10
[x] .kb/rejected/cue.mod/pkg symlink: update to /Users/mthdn/infra/repos/quicue-kg

# ── Session 2026-02-26: W3C alignment hardening ───────────────────────────

[x] Create patterns/catalog.cue (#DCATCatalog) — DCAT 3 as first-class pattern
[x] Update specs-registry.cue — DCAT: Downstream -> Implemented (now 14 specs)
[x] Create tools/validate-w3c.py — rdflib round-trip conformance validation
[x] Run validation: 10 passed, 1 known issue (OWL-Time), 1 skipped
[x] Add ADR-017: @id namespacing convention for multi-domain federation
[x] Add INSIGHT-013: rdflib proves @context resolution CUE cannot
[x] Add INSIGHT-014: OWL-Time flat keys fail JSON-LD round-trip
[x] Fix OWL-Time projection to use @graph array (INSIGHT-014)
      - both #CriticalPath and #CriticalPathPrecomputed now use @graph + @id
      - 574 triples from self-charter, 41 time:Interval resources
[x] Add DCAT/PROV-O/AS projections to supply-chain example
[x] Expand validate-w3c.py: OWL-Time, DCAT, PROV-O, Activity Streams, SKOS
[x] Final validation: 19 passed, 0 failed, 14 skipped (expected)
[x] Add validate-w3c.py to CI pipeline (+ README smoke test)
[x] Phase 8: enforce @base namespacing with #FederatedContext pattern
      - #FederatedContext: non-default @base enforcement, namespaced @id export
      - #FederatedMerge: collision detection via CUE unification, cross-edge validation
      - tests/federation/: 2-domain merge test (infra + monitoring, 5 resources)
      - W3C validation: 21 passed (up from 19, added 2 federation tests)
      - ADR-018: compile-time federation safety

# ── Documentation quality ─────────────────────────────────────────────────

[x] Enrich course-prereqs/README.md to match supply-chain quality
      - ASCII dependency diagram, field descriptions, output examples
      - charter gates table, patterns used, file structure
[x] Enrich recipe-ingredients/README.md similarly
      - ASCII dependency diagram, critical path walkthrough (205 min)
      - charter gates table, slack analysis (172 min)
[x] Enrich project-tracker/README.md similarly
      - ASCII dependency diagram, dual-graph pattern explanation
      - charter gates table, status tracking
[x] Verify all README run commands end-to-end (automated smoke test)
      - 26/26 commands pass; now in CI via validate.yml
[x] Add output examples to each example README (ADR-009 compliance)

# ── Cross-repo unification ────────────────────────────────────────────────
#
# Verified 2026-02-25:
#   - cmhc-retrofit symlinks to apercue (always in sync)
#   - quicue.ca copies apercue files (12 files drifted -- formatting only)
#   - quicue-kg: module quicue.ca/kg@v0, CUE v0.15.3
#   - cmhc-retrofit: module quicue.ca/cmhc-retrofit@v0, CUE v0.15.3
#   - quicue-swamp: only .kg/ dir, module local.project/kg, no apercue imports
#   - unified-kb (/Users/mthdn/infra/unified-kb/): federation of 4 .kb dirs
#     - imports apercue, quicue, cmhc, maison-613 knowledge bases
#     - cue vet passes, cue export federation works
#     - SKOS crossref maps equivalent concepts across repos
#   - All downstream README references to apercue are correct
#   - cue vet ./... passes in quicue.ca with current vendored copies

[x] Sync quicue.ca vendored apercue packages
      - synced analysis.cue (OWL-Time @graph fix), catalog.cue (new), specs-registry.cue
      - zero drift verified after sync
[x] Bump quicue-kg CUE version v0.15.3 -> v0.15.4
[x] Bump cmhc-retrofit CUE version v0.15.3 -> v0.15.4
[ ] unified-kb: add maison-613 .kb content (rfam.cc/maison-613/kb@v0 imported but untested)
[ ] unified-kb: verify skos-crossref ADR/insight IDs still match after .kb updates

# ── .kb knowledge base ────────────────────────────────────────────────────

[x] Add ADR-016: end-to-end command testing policy
[x] Add INSIGHT-011: README commands drift when schemas change
[x] Add INSIGHT-012: stray cue.mod directories isolate files from root module
[x] Verify .kb CUE files pass cue vet after edits (insights + decisions)
[x] Populate .kb/rejected/ with REJ-001 (flat keyed OWL-Time rejection)

# ── CI and automation ─────────────────────────────────────────────────────

[x] Add CI step: run every cue command from example READMEs
      - parse ```bash blocks, execute, check exit code
      - 23/23 commands pass locally; added to validate.yml
[x] Add CI step: verify no hardcoded absolute paths in markdown
      - grep for /home/, /Users/, /tmp/ in all *.md files
[x] toposort.py: add --help / -h flag (exit 0 with docstring)

# ── Missing documentation ─────────────────────────────────────────────────

[x] CONTRIBUTING.md (development setup, testing, PR process)
[x] ARCHITECTURE.md (module layers, data flow, projection pipeline)
[x] Pattern API reference docs/pattern-api.md (all # types, inputs, outputs)

# ── Phase 9: Publish ────────────────────────────────────────────────────

[x] Getting-started guide (docs/getting-started.md)
      - standalone walkthrough from empty project to W3C exports
[x] API stability classification (docs/api-stability.md)
      - all ~40 public types classified as stable or experimental
[x] Module publish readiness verified
      - apercue.ca@v0, source: self, no external deps for core packages
      - OCI registry compatible when CUE v0.16+ available

# ── Phase 10: Community ─────────────────────────────────────────────────

[x] Domain template scaffolder (tools/scaffold.sh)
      - creates project with graph, charter, compliance wired up
      - validates on scaffold, shows summary output
[x] Adapter catalog (docs/adapters.md)
      - documents quicue.ca, quicue-kg, cmhc-retrofit, unified-kb
      - includes creating-an-adapter guide
